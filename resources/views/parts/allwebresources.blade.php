<section class="mx-4">
    <div class="px-4 py-8 mx-8 max-w-screen-2xl md:mx-auto">
        <div class="flex flex-wrap w-full mb-8 md:mb-10">
            <div class="w-full">
                <h1 class="pb-4 text-3xl font-bold text-center text-gray-900 md:text-5xl">Web Resources</h1>
                <div class="max-w-xl mb-6 sm:mx-auto sm:text-center lg:max-w-2xl">
                    <p class="text-base text-gray-500 md:text-lg">
                        List of planning, land use, urban design and development websites, representing some of the top
                        online resources for news, information, and research on the built environment:
                    </p>
                </div>
            

                <fieldset class="flex flex-wrap justify-center gap-2 pt-8 mx-auto md:gap-4">
                    <div>
                        <label for="ColorBlack" class="flex items-center justify-center gap-2 px-3 py-2 text-black ">
                            <p class="text-base font-medium">Tags:</p>
                        </label>
                    </div>
                    <button id="all">
                        <label for="All" id="Alltag"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">All</p>
                        </label>
                    </button>

                    <button id="case">
                        <label for="child" id="childtag"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Case studies</p>
                        </label>
                    </button>

                    <button id="design">
                        <label for="green"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Design awards</p>
                        </label>
                    </button>

                    <button id="resources">
                        <label for="climate"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Resources</p>
                        </label>
                    </button>

                    <button id="platforms">
                        <label for="age"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Platforms</p>
                        </label>
                    </button>

                    <button id="non-profit">
                        <label for="placemaking"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Non-profits</p>
                        </label>
                    </button>

                         <button id="organizations">
                        <label for="placemaking"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Organizations</p>
                        </label>
                    </button>

                         <button id="magazines">
                        <label for="placemaking"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Online Magazines</p>
                        </label>
                    </button>

                         <button id="investigations">
                        <label for="placemaking"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Investigations</p>
                        </label>
                    </button>
                </fieldset>

                <fieldset class="flex flex-wrap justify-center gap-2 pt-8 mx-auto md:gap-4">
                    <div>
                        <label for="ColorBlack" class="flex items-center justify-center gap-2 px-3 py-2 text-black ">
                            <p class="text-base font-medium">Where:</p>
                        </label>
                    </div>
                    <button id="world">
                        <label for="Allsize" id="Allsizetag"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Worldwide</p>
                        </label>
                    </button>

                    <button id="uk">
                        <label for="large"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Uk</p>
                        </label>
                    </button>

                    <button id="france">
                        <label for="medium"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">France</p>
                        </label>
                    </button>

                    <button id="singapour">
                        <label for="small"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Singapour</p>
                        </label>
                    </button>

                    <button id="china">
                        <label for="xs"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">China</p>
                        </label>
                    </button>

                    <button id="brazil">
                        <label for="xs"
                            class="flex items-center justify-center px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 hover:bg-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 active:text-white peer-checked:text-white">
                            <p class="text-sm font-medium">Brazil</p>
                        </label>
                    </button>
                </fieldset>
            </div>
        </div>
        <div>
            <div id="boucle" class="grid grid-cols-2 gap-5 row-gap-5 lg:grid-cols-3 xl:grid-cols-5 md:grid-cols-2">

            </div>
            <div class="flex pt-16">
                <button id="prev"
                    class="flex items-center justify-center px-3 py-2 mx-auto text-gray-900 border border-gray-300 rounded-md cursor-pointer hover:border-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 hover:bg-gray-300 active:text-white peer-checked:text-white">
                    <p class="text-sm font-medium">previous</p>
                    <button id="next"
                        class="flex items-center justify-center px-3 py-2 mx-auto text-gray-900 border border-gray-300 rounded-md cursor-pointer hover:border-gray-300 peer-checked:border-gray-500 peer-checked:bg-gray-500 active:bg-gray-500 hover:bg-gray-300 active:text-white peer-checked:text-white">
                        <p class="text-sm font-medium">Next</p>
            </div>
        </div>

    </div>
          @include('parts.all')
</section>
<script>
     $('button').click(function() {
            $(this).addClass('bg-gray-200 rounded').siblings().removeClass('bg-gray-200 rounded');
    
     });

    const itemsPerPage = 10;
    let currentPage = 1;

    $(document).ready(function() {
        url = "api/webresources";
        $('#boucle').empty();
        fetchAndRenderData(url);

    });
    $("#next").click(function() {
        $('#boucle').empty();
        currentPage++;
        if (currentPage > totalPages) {
            currentPage = totalPages;
        }
        fetchAndRenderData(url);
    });

    $("#prev").click(function() {
        $('#boucle').empty();
        currentPage--;
        if (currentPage < 1) {
            currentPage = 1;
        }
        fetchAndRenderData(url);
    });


    const fetchAndRenderData = (url) => {
        fetch(url)
            .then((res) => res.json())
            .then((out) => {
                const obj = JSON.parse(JSON.stringify(out));
                let textFromJSON = obj;
                totalPages = Math.ceil(textFromJSON.length / itemsPerPage);
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const itemsToDisplay = textFromJSON.slice(startIndex, endIndex);

                $.each(itemsToDisplay, function(i, item) {
                    let html = `
                        <div class="flex transition border shadow-md md:hover:scale-110">
                        <div class="flex flex-col mx-auto">
                            <a href="${item.link}" target="_blank">
                                <img class="object-cover w-auto  saturate-120 h-32" src="storage/uploads/webresources/${item.image}" alt="content" onerror="this.src='./img/empty.png'">
                                <p class="w-full pt-2 text-base font-bold text-center text-black bg-white border-t">
                                    ${item.name}</p>
                                <p class="pb-2 text-xs text-center text-gray-500"> ${item.type}</p>
                            </a>
                        </div>
                    </div> `;
                    $('#boucle').append(html);
                });
            })
    };

    $('#all').click(function() {
        url = "api/webresources";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#case').click(function() {
        url = "api/webresources?type=case";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#design').click(function() {
        url = "api/webresources?type=design";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#resources').click(function() {
        url = "api/webresources?type=resources";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#platforms').click(function() {
        url = "api/webresources?type=platforms";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#non-profit').click(function() {
        url = "api/webresources?type=non-profit";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

        $('#magazines').click(function() {
        url = "api/webresources?type=online magazines";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

     $('#organizations').click(function() {
        url = "api/webresources?type=organizations";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

     $('#investigations').click(function() {
        url = "api/webresources?type=investigations";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#world').click(function() {
        url = "api/webresources";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#uk').click(function() {
        url = "api/webresources?country=uk";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#france').click(function() {
        url = "api/webresources?country=france";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#singapour').click(function() {
        url = "api/webresources?country=singapour";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#china').click(function() {
        url = "api/webresources?country=china";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#brasil').click(function() {
        url = "api/webresources?country=brasil";
        $('#boucle').empty();
        fetchAndRenderData(url);
    });

    $('#searchbar').keyup(function() {
        url = "api/webresources?q=" + $('#searchbar').val();
        $('#boucle').empty();
        fetchAndRenderData(url);
    });
</script>
